<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Booking - VijayRentals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body class="bg-gray-50">
<!-- Navigation -->
<nav class="bg-white shadow-md">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
        <div class="flex items-center">
            <i class="fas fa-car text-blue-600 text-2xl mr-2"></i>
            <a th:href="@{/index}" class="text-2xl font-bold text-gray-800">
                Vijay<span class="text-blue-600">Rentals</span>
            </a>
        </div>
        <div class="flex space-x-4">
            <a th:href="@{/dashboard}" class="text-gray-600 hover:text-blue-600">Dashboard</a>
            <a th:href="@{/bookings}" class="text-gray-600 hover:text-blue-600">Bookings</a>
        </div>
    </div>
</nav>

<!-- Main Content -->
<main class="container mx-auto px-4 py-8">
    <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-md p-8">
        <h1 class="text-3xl font-bold mb-6">
            <i class="fas fa-edit text-blue-600 mr-2"></i>Edit Booking
        </h1>

        <form th:action="@{/bookings/{id}/update(id=${booking.bookingId})}" method="post" th:object="${booking}">
            <!-- Vehicle Selection -->
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-car mr-1 text-blue-600"></i>Vehicle *
                </label>
                <select th:field="*{vehicleId}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600">
                    <option value="">Select Vehicle</option>
                    <option th:each="vehicle : ${vehicles}"
                            th:value="${vehicle.vehicleId}"
                            th:text="${vehicle.make + ' ' + vehicle.model + ' (' + vehicle.licensePlate + ')'}">
                        Vehicle Info
                    </option>
                </select>
            </div>

            <!-- Customer Selection -->
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-user mr-1 text-blue-600"></i>Customer *
                </label>
                <select th:field="*{customerId}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600">
                    <option value="">Select Customer</option>
                    <option th:each="customer : ${customers}"
                            th:value="${customer.customerId}"
                            th:text="${customer.firstName + ' ' + customer.lastName}">
                        Customer Name
                    </option>
                </select>
            </div>

            <!-- Pickup Date -->
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-calendar-alt mr-1 text-blue-600"></i>Pickup Date *
                </label>
                <input type="datetime-local"
                       th:value="${booking.pickupDate != null ? #temporals.format(booking.pickupDate, 'yyyy-MM-dd''T''HH:mm') : ''}"
                       name="pickupDate"
                       required
                       class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600" />
            </div>

            <!-- Return Date -->
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-calendar-check mr-1 text-blue-600"></i>Return Date *
                </label>
                <input type="datetime-local"
                       th:value="${booking.returnDate != null ? #temporals.format(booking.returnDate, 'yyyy-MM-dd''T''HH:mm') : ''}"
                       name="returnDate"
                       required
                       class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600" />
            </div>


            <!-- Deposit Amount -->
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-dollar-sign mr-1 text-blue-600"></i>Deposit Amount *
                </label>
                <input type="number" th:field="*{depositAmount}" step="0.01" required
                       class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600"
                       placeholder="Enter deposit amount" />
            </div>

            <!-- Status -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-info-circle mr-1 text-blue-600"></i>Status *
                </label>
                <select th:field="*{status}" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600">
                    <option value="PENDING">Pending</option>
                    <option value="CONFIRMED">Confirmed</option>
                    <option value="COMPLETED">Completed</option>
                    <option value="CANCELLED">Cancelled</option>
                </select>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-4">
                <button type="submit" class="flex-1 bg-blue-600 text-white px-6 py-2 rounded-md font-medium hover:bg-blue-700 transition">
                    <i class="fas fa-save mr-2"></i>Update Booking
                </button>
                <a th:href="@{/bookings}" class="flex-1 bg-gray-200 text-gray-700 px-6 py-2 rounded-md font-medium hover:bg-gray-300 transition text-center">
                    <i class="fas fa-times mr-2"></i>Cancel
                </a>
            </div>
        </form>
    </div>
</main>
</body>
</html>
