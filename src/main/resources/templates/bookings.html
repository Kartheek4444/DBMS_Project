<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments :: head('Bookings - VijayRentals')"></head>
  <body class="font-poppins bg-gray-50">
    <!-- Navigation -->
  <nav th:replace="fragments :: navbar"></nav>

  <!-- Bookings Section -->
  <main>
      <section class="py-10">
          <div class="container mx-auto px-4">
              <h1 class="text-3xl font-bold mb-4">My Bookings</h1>
              <p class="text-gray-600 mb-8">
                  View all your current, past, and cancelled bookings here.
              </p>

              <div class="bg-white rounded-lg shadow-md overflow-hidden">
                  <div class="px-6 py-4 border-b border-gray-200">
                      <h2 class="text-xl font-bold">Booking History</h2>
                  </div>
                  <div class="overflow-x-auto">
                      <table class="min-w-full divide-y divide-gray-200">
                          <thead class="bg-gray-50">
                          <tr>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Booking ID</th>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Vehicle</th>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pickup Date</th>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Return Date</th>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Deposit</th>
                          </tr>
                          </thead>
                          <tbody class="bg-white divide-y divide-gray-200">
                          <tr th:if="${bookings == null or bookings.isEmpty()}">
                              <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                                  <i class="fas fa-inbox text-4xl mb-2 block"></i>
                                  <p class="text-lg font-medium">No bookings found</p>
                                  <p class="text-sm">You don't have any bookings yet.</p>
                              </td>
                          </tr>
                          <tr th:each="booking : ${bookings}" class="hover:bg-gray-50">
                              <td class="px-6 py-4 whitespace-nowrap font-medium" th:text="${booking.bookingId}">BK001</td>
                              <td class="px-6 py-4 whitespace-nowrap"
                                  th:text="${booking.vehicleMake + ' ' + booking.vehicleModel}">Toyota Camry</td>
                              <td class="px-6 py-4 whitespace-nowrap" th:text="${#temporals.format(booking.pickupDate, 'MMM dd, yyyy')}">Sep 15, 2023</td>
                              <td class="px-6 py-4 whitespace-nowrap" th:text="${#temporals.format(booking.returnDate, 'MMM dd, yyyy')}">Sep 20, 2023</td>
                              <td class="px-6 py-4 whitespace-nowrap">
                  <span class="px-2 py-1 text-xs rounded-full"
                        th:classappend="${booking.status?.name() == 'CONFIRMED'} ? 'status-active' :
                                        (${booking.status?.name() == 'PENDING'} ? 'bg-yellow-100 text-yellow-800' :
                                        (${booking.status?.name() == 'COMPLETED'} ? 'status-completed' : 'status-cancelled'))"
                        th:text="${booking.status}">Active</span>
                              </td>
                              <td class="px-6 py-4 whitespace-nowrap" th:text="${'$' + booking.depositAmount}">$250</td>
                          </tr>
                          </tbody>
                      </table>
                  </div>
              </div>
          </div>
      </section>
  </main>

  <!-- Footer -->
  <footer th:replace="fragments :: footer"></footer>

  </body>
</html>
