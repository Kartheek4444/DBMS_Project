<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: head('My Profile - VijayRentals')"></head>
<body class="font-poppins bg-gray-50">
<nav th:replace="fragments :: navbar"></nav>

<main class="min-h-screen py-12">
    <div class="container mx-auto px-4 max-w-4xl">
        <div th:if="${param.success}" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-6">
            <i class="fas fa-check-circle mr-2"></i>Profile updated successfully!
        </div>

        <div class="bg-white rounded-2xl shadow-lg overflow-hidden mb-6">
            <div class="bg-gradient-to-r from-primary to-secondary h-32"></div>
            <div class="px-8 pb-8">
                <div class="flex flex-col sm:flex-row items-center sm:items-end -mt-16 mb-6">
                    <div class="relative">
                        <img th:src="${staff.avatarUrl != null ? staff.avatarUrl : '/uploads/avatars/default_avatar.png'}"
                             alt="Profile Picture"
                             class="w-32 h-32 rounded-full border-4 border-white shadow-xl object-cover bg-white">
                    </div>
                    <div class="sm:ml-6 mt-4 sm:mt-0 text-center sm:text-left">
                        <div class="flex items-center justify-center sm:justify-start gap-3">
                            <h1 class="text-3xl font-bold text-gray-900" th:text="${staff.firstName + ' ' + staff.lastName}">John Doe</h1>
                            <span class="inline-block px-3 py-1 rounded-full text-sm font-medium"
                                  th:classappend="${staff.isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}"
                                  th:text="${staff.isActive ? 'Active' : 'Inactive'}">Active</span>
                        </div>
                        <p class="text-gray-600" th:text="${staff.email}">john.doe@example.com</p>
                    </div>
                    <a th:href="@{/staff/profile/edit}" class="sm:ml-auto mt-4 sm:mt-0 bg-primary text-white px-6 py-2 rounded-lg hover:bg-secondary transition">
                        <i class="fas fa-edit mr-2"></i>Edit Profile
                    </a>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-2xl shadow-lg p-8 mb-6">
            <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="fas fa-user text-primary mr-3"></i>Personal Information
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="text-sm text-gray-500">First Name</label>
                    <p class="text-gray-900 font-medium" th:text="${staff.firstName}">John</p>
                </div>
                <div>
                    <label class="text-sm text-gray-500">Last Name</label>
                    <p class="text-gray-900 font-medium" th:text="${staff.lastName}">Doe</p>
                </div>
                <div class="col-span-2" th:if="${staff.middleNames != null and !staff.middleNames.isEmpty()}">
                    <label class="text-sm text-gray-500">Middle Name(s)</label>
                    <p class="text-gray-900 font-medium" th:text="${#strings.listJoin(staff.middleNames, ', ')}">James Robert</p>
                </div>
                <div>
                    <label class="text-sm text-gray-500">Email</label>
                    <p class="text-gray-900 font-medium" th:text="${staff.email}">john@example.com</p>
                </div>
                <div>
                    <label class="text-sm text-gray-500">Phone</label>
                    <p class="text-gray-900 font-medium" th:text="${staff.phone}">+1234567890</p>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-2xl shadow-lg p-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
                <i class="fas fa-briefcase text-primary mr-3"></i>Work Information
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="text-sm text-gray-500">Position</label>
                    <p class="text-gray-900 font-medium" th:text="${staff.position != null ? staff.position : 'Not specified'}">Manager</p>
                </div>
                <div>
                    <label class="text-sm text-gray-500">Role</label>
                    <p class="text-gray-900 font-medium" th:text="${staff.role}">STAFF</p>
                </div>
                <div>
                    <label class="text-sm text-gray-500">Hire Date</label>
                    <p class="text-gray-900 font-medium" th:text="${staff.hireDate != null ? #temporals.format(staff.hireDate, 'dd MMM yyyy') : 'Not provided'}">01 Jan 2020</p>
                </div>
                <div>
                    <label class="text-sm text-gray-500">Status</label>
                    <p class="text-gray-900 font-medium" th:text="${staff.isActive ? 'Active' : 'Inactive'}">Active</p>
                </div>
            </div>
        </div>
    </div>
</main>

<footer th:replace="fragments :: footer"></footer>
</body>
</html>
